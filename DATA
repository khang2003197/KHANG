CREATE TABLE SINHVIEN(
	CCCD CHAR(12) NOT NULL,
	HoTen VARCHAR(40),
	GioiTinh VARCHAR(40),
	NGSINH DATE,
	QuocGia VARCHAR(40),--
	Truong VARCHAR(40),
	SV_NAM INT,
	DanToc VARCHAR(40),
	TonGiao VARCHAR(40),
	CONSTRAINT PK_SINHVIEN PRIMARY KEY(CCCD)
);

CREATE TABLE TOA (
	KHU CHAR(1) NOT NULL,
	MATOA VARCHAR(10) NOT NULL,
	SLSinhVien INT,
	CONSTRAINT FK_TOA PRIMARY KEY (MATOA)
);

CREATE TABLE NHANVIEN(
	CCCD CHAR(12) NOT NULL,
	HoTen VARCHAR(40),
	NgSinh DATE,
	GioiTinh VARCHAR(10),
	ChucVu VARCHAR(20),
	Luong bigint,
	DiaChi VARCHAR(100),
	CONSTRAINT FK_NHANVIEN PRIMARY KEY (CCCD)
);


CREATE TABLE PHONG( 
	MATOA VARCHAR(10) NOT NULL,
	MAPHONG VARCHAR(10) NOT NULL,
	LoaiHinh VARCHAR(50),
	SL int,
	CONSTRAINT PK_Phong PRIMARY KEY (MATOA,MAPHONG),
	CONSTRAINT FK_MATOA FOREIGN KEY (MATOA) REFERENCES TOA(MATOA)
);

CREATE TABLE SV_TOA_PHONG(
	CCCD CHAR(12) NOT NULL,
	HoTen VARCHAR(40),
	KHU CHAR(1) NOT NULL,
	MATOA VARCHAR(10) NOT NULL,
	MAPHONG VARCHAR(10) NOT NULL,
	CONSTRAINT PK_SV_TOA_PHONG PRIMARY KEY (CCCD,KHU,MATOA,MAPHONG),
	CONSTRAINT FK_CCCD1 FOREIGN KEY (CCCD) REFERENCES SINHVIEN(CCCD),
	CONSTRAINT FK_KHU1 FOREIGN KEY (MATOA) REFERENCES TOA(MATOA),
	CONSTRAINT FK_MAPHONG1 FOREIGN KEY (MATOA,MAPHONG) REFERENCES PHONG(MATOA,MAPHONG)
);

CREATE TABLE PHUONGTIEN(
	CCCD CHAR(12) NOT NULL,
	PHUONGTIEN VARCHAR(40) NOT NULL,
	SOXE VARCHAR(40),
	CONSTRAINT PK_PHUONGTIEN PRIMARY KEY(CCCD,PHUONGTIEN),
	CONSTRAINT FK_CCCD FOREIGN KEY (CCCD) REFERENCES SINHVIEN(CCCD)
);

CREATE TABLE HOADON(
	MAHD VARCHAR(10) NOT NULL,
	MATOA VARCHAR(10) NOT NULL,
	MAPHONG VARCHAR(10) NOT NULL,
	THANG INT,
	TONGTIEN BIGINT,
	CONSTRAINT PK_HOADON PRIMARY KEY (MAHD),
	CONSTRAINT FK_MAPHONG2 FOREIGN KEY (MATOA,MAPHONG) REFERENCES PHONG(MATOA,MAPHONG)	
);

CREATE TABLE CTHD(
	MAHD VARCHAR(10) NOT NULL,
	LOAIHD VARCHAR(20) NOT NULL,-- LOAI HOA DON ( TIEN DIEN, TIEN NUOC, TIEN PHONG)
	TIEN BIGINT,
	CONSTRAINT PK_CTHD PRIMARY KEY (MAHD,LOAIHD),
	CONSTRAINT FK_MAHD FOREIGN KEY (MAHD) REFERENCES HOADON(MAHD)
);

CREATE TABLE TAIKHOANSV(
	CCCD CHAR(12) NOT NULL,
	MK VARCHAR(40) NOT NULL,
	CONSTRAINT PK_TAIKHOANG1 PRIMARY KEY (CCCD),
	CONSTRAINT FK_CCCD FOREIGN KEY (CCCD) REFERENCES SINHVIEN(CCCD)
);

CREATE TABLE TAIKHOANNV(
	CCCD CHAR(12) NOT NULL,
	MK VARCHAR(40) NOT NULL,
	CONSTRAINT PK_TAIKHOANG PRIMARY KEY (CCCD),
	CONSTRAINT FK_CCCD FOREIGN KEY (CCCD) REFERENCES NHANVIEN(CCCD)
);
